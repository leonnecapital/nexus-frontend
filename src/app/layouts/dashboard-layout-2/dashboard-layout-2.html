<div class="flex h-screen bg-gray-50 overflow-hidden">

    <div
        class="hidden md:flex flex-col w-16 lg:w-60 bg-[#001f50] text-white shadow-xl transition-all duration-300 group hover:w-60">

        <div class="flex items-center justify-center h-16 border-b border-[#5c9afc]/30 p-2 overflow-hidden">
            <span
                class="text-xl font-extrabold tracking-wider text-white whitespace-nowrap hidden group-hover:inline lg:inline">
                NEX<span class="text-[#5c9afc]">US</span>
            </span>
            <span class="text-xl font-extrabold tracking-wider text-white block group-hover:hidden lg:hidden">
                N<span class="text-[#5c9afc]">X</span>
            </span>
        </div>

        <nav class="flex-grow p-3 space-y-3">
            @for (tab of tabs; track tab.id) {
            <a (click)="doClick(tab.id)" [ngClass]="getTabClass(tab)"
                class="flex items-center justify-center lg:justify-start py-2 px-3 rounded-lg transition duration-150 group-hover:justify-start lg:justify-start">

                <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" [attr.d]="tab.iconPath">
                    </path>
                </svg>

                <span class="ml-3 whitespace-nowrap hidden group-hover:block lg:block">{{tab.label}}</span>
            </a>
            }
        </nav>
    </div>

    <div class="flex flex-col flex-1 overflow-y-auto">

        <header
            class="flex items-center justify-between h-16 bg-white border-b border-gray-200 px-6 shadow-md sticky top-0 z-10">

            <div class="flex items-center">
                <button (click)="toggleMobileMenu()" class="text-gray-500 focus:outline-none md:hidden mr-4"
                    aria-label="Abrir Menu">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>

            <div class="flex items-center space-x-4">

                <button class="p-2 rounded-full text-gray-500 hover:bg-gray-100 transition duration-150 relative">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9">
                        </path>
                    </svg>
                    <span class="absolute top-1 right-1 h-2 w-2 rounded-full bg-[#f2ab1a] border-2 border-white"></span>
                </button>

                @if (isMobileMenuOpen()) {
                <div class="fixed inset-0 bg-opacity-5 z-20 md:hidden" (click)="toggleMobileMenu()">
                </div>

                <div class="fixed inset-y-0 left-0 w-60 bg-[#001f50] text-white shadow-2xl z-30 
                                    transition-transform duration-300 transform md:hidden">

                    <div class="flex items-center justify-center h-16 border-b border-[#5c9afc]/30 p-2">
                        <span class="text-xl font-extrabold tracking-wider text-white whitespace-nowrap">
                            NEX<span class="text-[#5c9afc]">US</span>
                        </span>
                    </div>

                    <nav class="flex-grow p-3 space-y-3">
                        @for (tab of tabs; track tab.id) {
                        <a (click)="doClick(tab.id); toggleMobileMenu()" [ngClass]="getTabClass(tab)"
                            class="flex items-center justify-start py-2 px-3 rounded-lg transition duration-150">

                            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    [attr.d]="tab.iconPath">
                                </path>
                            </svg>

                            <span class="ml-3 whitespace-nowrap">{{tab.label}}</span>
                        </a>
                        }
                    </nav>

                </div>
                }

                <div class="flex items-center space-x-3 border-l pl-4 cursor-pointer group">
                    <img class="h-10 w-10 rounded-full object-cover border-2 border-gray-200 group-hover:border-[#5c9afc] transition"
                        [src]="userPhotoUrl" [alt]="'Avatar de ' + userName">

                    <div class="text-left hidden sm:block">
                        <p class="text-sm font-medium text-[#001f50] group-hover:text-[#5c9afc] transition">{{userName}}
                        </p>

                        <p class="text-xs text-gray-500">{{userRole}}</p>
                    </div>
                </div>

                <button (click)="signout()" title="Sair"
                    class="p-2 rounded-full text-gray-500 hover:text-white hover:bg-[#f2ab1a] transition duration-150 focus:outline-none focus:ring-2 focus:ring-[#f2ab1a] focus:ring-offset-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1">
                        </path>
                    </svg>
                </button>
            </div>
        </header>

        <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6 sm:p-8">
            <router-outlet></router-outlet>
        </main>
    </div>
</div>